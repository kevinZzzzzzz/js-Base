## 小程序和 h5 的区别

### 运行环境

- 小程序：运行在特定的 app 上，比如微信、支付宝等的一个独立的运行环境
- h5：运行在各种浏览器上，

### 渲染机制

- 小程序: 双线程架构, 基于 webview 线程（渲染层）和 js 线程（逻辑层）
  小程序采用的是一种分离的渲染机制，逻辑层和渲染层是分开的，分别运行在不同的线程中
  **正因为如此，所以 js（逻辑层）不能直接访问 dom（渲染层）**
  - 渲染层：负责页面的渲染
  - 逻辑层：负责处理数据和事件逻辑
  - 两个线程是分开的，通过一个数据桥的概念进行通信，js 线程将需要渲染的数据发送到渲染线程，渲染线程接收到数据后进行渲染
- h5: 单线程架构，基于浏览器的主线程

#### 小程序双线程架构

- 安全性：小程序将逻辑层和视图层分开，逻辑层无法直接操作 dom 结构，从而避免了安全问题

### DOM 访问

- 小程序：小程序的逻辑层无法直接访问 dom 结构，只能通过数据桥进行通信
- h5：h5 的逻辑层可以直接访问 dom 结构

### 性能和体验

#### 热启动

- 小程序：当用户离开小程序或者切换到其他应用，当用户很快再次进入小程序时，小程序会从上次离开的位置继续运行
- h5：h5 的生命周期取决于浏览器的生命周期。当用户关闭浏览器或者浏览器标签页时，h5 也就结束了，即便重新打开也不会保留上次的状态

#### 离线访问

- 小程序：小程序在首次加载时会下载资源到本地，后续使用即便没有网络也能打开小程序，并且由于资源和代码都保存在本地，也减少了加载时间。
- h5： 在不额外接入其他技术的情况下，没有网络，是无法直接正常访问。

### 深度集成

- 小程序：微信小程序可以直接使用微信的支付、分享、登录等功能，这些都是浏览器无法提供的
- h5： 基于浏览器提供的标准 Web Api，无法直接访问设备的某些功能或者类似微信支付这样的特殊 app 的功能
