# 什么的 Fiber

fiber 可以理解为是一个执行单元，也可以理解为是一种链表数据结构

## 执行单元

可以把 fiber 理解成一个执行单元，每执行完一个执行单元，react 就会检查现在剩余多少时间，如果还有空闲时间则将时间控制权交出去，这个获取控制权的过程可以使用浏览器的 requestIdleCallback 方法实现
理解：
Fiber 架构就像是将一个大任务分解成一系列小任务的智能管家，每个小任务都是一个独立的单元，需要一口气完成，不能中途停下来。
一旦小任务完成了，Fiber 就会主动把控制权还给浏览器，让浏览器有机会去处理用户的新操作。
避免了像过往一样非得等到整个大任务全都执行完，浏览器才会响应用户的新动作。
简而言之，Fiber 通过细分任务，让浏览器在处理任务的同时，也能保持对用户操作的快速响应。

![Fiber 架构](./3ae6f9cb3d4149fc9e9389451c2ea0fc~tplv-73owjymdk6-jj-mark-v1_0_0_0_0_5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pyJ5py65ZCO6ISR_q75.webp)

## 数据结构

Fiber 使用链表这种形式来组织。在这个结构中，每个虚拟 DOM 元素都对应一个 Fiber 节点，就像下面的图示那样，每个节点都代表一个 Fiber。每个 Fiber 节点都有指向它的孩子（child）、兄弟（sibling）和父母（parent）的指针。
